 1) Maybe allow comments to gifts in Gofreerev => Post facebook comments

 2) how much information to se about deals between friends and friends friends?
    facebook: Shows status from friends on wall - do not show status from friends friends on wall
    Show gifts started by friends as giver or receiver with all pictures and comments
    Anonymous gifts started by friends friends as giver or receiver and with friends as receiver or giver
    - display received at and balance.
    - hide picture and name of friends friend
    - hide text and pictures

 3) when closing at deal and paying with money.
    select between anonymous money without a linked story or link the money to one or more stores / other gifts
    anonymous money - no links between gifts - no story updates
    linked money - story updates

 4) link stories. Insert link for one story in an other story.
    how to handle security? Should only see gifts from7to friends

 5) balance sorted by received_at in user.recalculate_balance
    gifts sorted by created_at desc in gifts/index
    closed deals should be sorted by received_at descending to display balance in correct order
    open deals should be sorted by newest comment in top
    maybe sort by received_at || created_at <=>  order("ifnull(received_at,created_at)
    sort by received_at not possible. received_at is encrypted text in db
    maybe add field with timestamp for last comment. Newest created / closed / commented deals first
    must be a not encrypted field
    problem. what if different users wishes different sort criteria?  fx a) sort by received_at, b) sort by comment_at, c) etc

 6) get timezone from login api. ok. timezone added to user
    Use timezone in views. . not yet any timestamps in views.
    only facebook returns timezone for user
    drop timezone from user and get timezone from browser with javascript

 7) add date format. see application_helper.format_date

 8) add time format. Use timezone in time format in views

 9) add a counter to a gift. Normally 1 gift, but can be any number or nil. Eg. nil for a service.
    Clone a closed gift, keep the original gift and decrease counter. Close deal when counter reaches zero.
    Maybe link all the stories if accepted by the receiver

10) api notifications:
    get a app access token.
    send only notifications to api if internal notifications in app is not read.
    Short summary of unread app notifications in api notification
    Only few api notifications and stop sending messages if user do not start app

11) close account and delete all data in app
    auto cleanup and close of inactive accounts?!
    there is no reason to keep data for users that does not use the app ( other than delete of user and gifts changes other users balance )
    maybe

12) add more detailed description of what user information is saved in app. privacy note. Maybe with cookie note.

13) gifts/index: post on api wall checkbox. Only if user has granted post-on-wall prio.

14) gifts/index: comment with final description before the deal is closed? Or keep original text with comments?

15) implement other logins. Google+ and linkedin login is almost identical wish facebook login

16) connect login user across different login apis. Only one balance even if you uses more than one login api.
    can not show gifts from other login apis, but can include balance from other login apis in user's balance.
    check out rails omniauth gem (multi api login)
    allow gofreerev friends across login api.
    how to handle balance across api's?

17) gets only small picture api url from fb. See gift.get_api_picture_url method
    It should http://www.dr.dk/Nyheder/Politik/2013/10/22/083947.htmbe possible to get url for a larger picture from facebook api

18) wrap fb api into an generic exception handler with dump of request and exception after error

19) add accept conditions for new users?

20) add disclaimer

21) add cookie policy note

22) check out coffeescript

23) How much sync. of comments in api and comments in app?
    write comment to fb - don't download comments from fb

24) edit gift. Can not edit post on api. Allow to edit post in app?

25) create gift as ajax in gifts/index page?
    How to handle picture upload, missing api privs. show/hide link i gifts/index page?

26) mark new comments with color in inbox.
   app/models/comment.rb:554
27) Model changes - user/comment - new model/table -
    like/unlike comment

28) new deal / cancel / accept / reject error handling:
    new deal can fail if gift user has accepted an other offer
    cancel can fail if gift user has accepted a deal or has rejected new deal from user
    accept can fail if other user has cancelled the offer
    reject can fail if other user has cancelled the offer
    write short error msg in gift-xxx-comment-yyy-status div after errors

29) comments: timestamps for cancel, reject and accept deal?

30) use identical encryption keys on development and test (easy generation of fixtures)
    use different encryption keys in production environment

31) make script to compare language files (en, da etc). Find missing keys

32) allow new proposal for giver/receiver so that giver/receiver can change price?

33) add category to gift?
    could make it easier to find relevant gifts
    But more information to fill when posting gifts

34) add number of friends to user_div mouse over text?

35) add number of mutual friends to user_div mouse over text?

36) test with IE.
    can not get ie6, 7, 8 to start under wine
    ie8 is running under PlayOnLinux, but runs wery slow.
    http posts in gofreerev not working (http and ajax)- rails server: ERROR invalid body size - no solution found
    better to test from a read windows pc.

37) recalculate user balance at request or once every day

38) refactor styles to stylesheets - use stylesheets and not inline styles.

39) add comments with available interpolation variables to locales files (da, en)

40) user.recalculate_balance recalculates balance for all closed deals with user as giver or receiver.
    ok when few closed deals for a user, but can be a performance issue for many closed deals.
    allow recalculating balance from a specific date or from a specific gift.id
    should only recalculate balance from last closed deal

41) delete user account - recalculate all relevant user balances (closed deals)

42) batch processing:
    accept new deal - set new_balance_at = yesterday - for both users - user is marked for recalculate balance (ok)
    batch processing - recalculate balance for all users where new_balance_at != today (todo)

43) check texts in views/fb/create.html.erb and create_da_html.erb

44) show a more informative page when not logged in
    ensure that all not logged users is rendered to same page
    this page is also index by search engines and should be informative
    maybe the same texts as in /fb/create.html.erb and create_da_html.erb pages

45) check todo's in source

46) delete gift - dialog box with
    a) removed from gift from share page with unchanged balance
    b) delete gift with changed balance
    c) cancel
    No easy was to implement this. See gift_helper.link_to_delete_gift

47) add som kind of flash when removing gifts and comments from page - get some jquery books

48) price validation.
    price is validated in JS and is validated in gifts and comments controller.
    price validation should be in Gift and Comment model, but price is a Float in model and can not be invalid

49) compare list of socialnetworks with list of oauth2 api's
    https://github.com/intridea/omniauth/wiki/List-of-Strategies
    http://webtrends.about.com/od/socialnetworks/tp/general-social-network-list.htm
    http://en.wikipedia.org/wiki/List_of_social_networking_websites

50) no locale is received from linkedin and twitter.
    add locale in url and allow users to select language in app

51) omniauth handles only login process.
    need to have some helpers for each provider:
    - facebook - koala
    - google+.
      http://code.google.com/p/google-api-ruby-client/
    - linked:
    - twitter:

53) alloapp/models/comment.rb:554w .5 timezones. Timezone new is a Fixnum. "-1" for denmark. "-5.5" for india.

56) md5 alternatives?

57) ajax task for each provider.

58) ajax post login - add welcome message?

60) must have stack dump for all ajax tasks called with eval
    add exception to all ajax tasks and check log

61) add priority to ajax task queue. fetch echange rates should be executed after post_login ajax tasks

62) don't insert same ajax task twice in ajax task queue

63) check for special api setup error messages and return translate with some hints
    for example google+ : Access Not Configured

64) add no post login ajax task error message with hint how to fix this problem

65) difference between facegook & linkedin friends and google+ & twitter friends
    facebook & linkedin friends are mutual friends
    google+ and twitter friends are not mutual friends
    how to handle not mutual friends in gofreerev?

66) invite friends to user gofreerev.
    faceboke (ok)
    google+ (todo)
    linkedin (todo)
    twitter (todo)

 67) show auth/index page for not logged in users

 68) menu should always have a login and a log out link
     link to provider specific function if only one relevant provider
     link to auth/index page otherwise

 69) change header line for responsive design.
     picture without name and api if width <= nnn
     no balance and currency LOV if width <= nnn - change currency in users/show page for login user
     one or two lines nav links in header line
     show dummy header line for not logged in users

 70) minor problem with ajax util/currencies to get full list of currencies onfocus
     user has to click twice on currency LOV to change currency.

 71) gift post - change to ajax - do not reload page
     ajax insert gift in page with temporary local url (ok)
     add ajax task to post on api wall (ok for facebook)
     ajax replace gift picture url when picture has been received from api
     test all errors after changing gift post to ajax
     must support multiple login apis
     check how to post on google+, linkedin and twitter
     move 4 api fields from gifts to an new api_gifts table with one row for each api
     add temp_picture_filename to gifts - gift.id + random string
     add temp_picture helper methods - temp_picture_os_filename - temp_picture_url

 72) delete gift - JS confirm dialog to big on 320 width screen
     JS confirm dialog can not be styled. Needs a custom dialog box
     http://lesseverything.com/blog/archives/2012/07/18/customizing-confirmation-dialog-in-rails/
     http://www.pjmccormick.com/nicer-rails-confirm-dialogs-and-not-just-delete-methods
     Not working in rails 4 or I am must be doing some ting wrong - tried with JS - tried with coffee script

 77) missing opera plugin to set screen width.

 78) responsive testing tools: http://www.gonzoblog.nl/2012/03/21/10-testing-tools-for-responsive-web-design/
     http://mattkersley.com/responsive/ can be used. Not working for localhost / gofreerev
     http://responsivepx.com can be used. Not working for localhost / gofreerev.
     Many other tools not working for localhost / gofreerev

 80) Problem with cleanup in ajax task queue.
     It looks like the page is handing while waiting for cleanup in ajax task queue
     Added a delay for 1 second in page footer before requesting execution of ajax tasks
     still a problem with first request every day (ajax task cleanup + fetch currencies)
     maybe problem with development setup. Only one server process

 83) <body onload="xx"> is being used in application layout to set onfocus event to get list of currencies in page header
     http://api.jquery.com/ready/
     The .ready() method is generally incompatible with the <body onload=""> attribute.
     If load must be used, either do not use .ready() or use jQuery's .load() method to
     attach load event handlers to the window or to more specific items, like images.

 85) move documentation in html pages to <%# -%> tags for smaller pages and intact documentation

 87) shorten inline javascript code in html pages
     add helper JS functions
     for example /shared/show_more_rows

 88) check html source to see if anything can be removed or shorten

 89) ajax insert messages in ajax_tasks_errors in page header
     util/do_ajax_tasks.html.erb - @errors is an array with key and options for translation
     gifts/ajax_errors.html.erb - @errors is an array with translated messages
     maybe move to shared with better partial names

 91) picture size problem when ajax adding new gift with big picture
     First added with full size and then resized to normal size
     takes only a split second but is ugly

 92) logout should be logout of all APIs to prevent "mixed" user login
     for example if users are sharing the same public computer and user forgets to close browser window

 93) cookies notification does not close after 30 seconds

 94) picture size problem. First gifts/index request for a new day
     charlie gift 383. picture not resizing to width 100px.
     picture was resized to normal size after 2 minutes (looks like the next new_messages_count solved the problem)
     Only a problem with temporary local pictures.

 97) add timestamp to lines in ajax_tasks_errors for easier test & debugging
     timestamp - server timestamp or client timestamp?
     Maybe only timestamp if DEBUG_AJAX = true

 98) rename uploadFile to gift_file_display (file upload input display field)

 99) how does browse file look like on a mobile device?

 100) add picture direct from camera - google html media capture - http://mobilehtml5.org/

 101) posting on multiple api's can take some time to complete
      maybe execute ajax tasks one by one to give a more responsive gift index page
      maybe use a flag or special priority for this effect in ajax task queue

 102) add ajax:error for comment post. Should write an error message in ajax_tasks_errors table.

 103) how to accept deal with multiple provider logins?
      gift created be user logged with 3 api providers
      gift accepted with user logged in with 2 api providers.
      how to set user_id_giver / user_id_receiver for the last api_gift?

 104) comments. should comments be visible across providers?
      this is comments or api_comments?
      comments would be best if comments can be seen across login providers

 105) jquery: add unbind before bind to prevent doublet ajax event handlers

 106) check modernizr.js - where is it used - where is it loaded

 107) check rails.validations.js - where is it used - where is it loaded

 108) util.missing_api_picture_urls
      change from gift ids to api gift ids

 109) missing_api_picture_urls
      change javascript that catches pictures with invalid urls - should report api_gift.id
      change form that sends array with invalid picture ids to util.missing_api_picture_urls

 110) change get_missing_api_picture_urls method in application controller
      facebook user id in hardcoded

 111) check direction. added as field to gifts. check direction in source

 112) delete api_gifts and gifts with temp picture urls

 113) accept deal: must add giver/receiver for all api gift rows
      match login users with comment user
      check user_combination for comment user to test if other user also uses multiple logins
      map api gifts provider for provider (login users <=>
      use dummy user if no provider match between login user(s) and comment user(s)

 114) create a dummy user for each provider
      for example gofreerev/facebook, gofreerev/google, gofreerev/linkedin etc.

 115) reject login with user id for dummy user

 116) where to send notifications for a user with multiple logins?

 117) dont send notification when charlie comments his own gift
      notification is from charlie/facebook to charlie/linkedin
      and from charlie/linkedin to charlie/facebook

 118) stress test. make a db with really many rows and test performance.
      There maybe is missing an index or two
      there maybe are some sql to rewrite

 119) gift create - ajax tasks are not executed after gifts/create ajax request

 120) some problems in user.recalculate balance after splitting gifts in gifts and api_gifts
      check /auth/facebook and post_login error for price

 121) check facebook callback when gofreerev is started from facebook
      maybe delete fb controller and use auth controller?!

 122) add validation for gift.received_at?
      direction = both
      giver and receiver in api_gifts

 123) post_login_facebook.
      add line to ajax tasks errors with link to grant missing status_update priv.
      See util.post_on_facebook, gift_posted_on_wall_api_wall == 3
      translate key shared.translate_ajax_errors.gift_posted_3_html

 124) add ignore / don't show missing priv link link
      that is - user don't want to see message any more
      add post on wall Y/N field to user

 125) check auth_read_stream_url
      old http gifts/create used flash[:read_stream] to signal to gifts/index page to show link

 126) new gift form. disable file upload !@user.post_gift_allowed?
      must check @users. file upload ok if post allowed for one api.
      add special mouse over text if file upload is disabled
      or add css så what it is clear that bottom is disabled

 127) follow/unfollow gift:
      user logged in as provider 1 selects to follow gift
      user logged in as provider 2 selects to unfollow gift
      show unfollow link when user is logging in as provider 1 and 2?


