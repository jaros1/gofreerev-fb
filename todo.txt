2) Maybe allow comments to gifts in Gofreerev => Post af FB comments

3) Invite friends to app function?

5) opera. client side validation not working in gifts/index page. Works in other browsers.

9) few price info on gifts/index page. More information available in titles
   Full price information in user/show page

17) exchanged social dividend is displayed as gifts/index view, but social dividend = negative_interest / 4 is missing.
    add social dividend (negative_interest / 4) to balance.
    display social dividend in format_user_balance
    done: add key with social dividend to balance hash
    social dividend is splitted in currencies.
    done:  maybe add a negative interest / social dividend hash to user
    maybe add a system user - negative currency could be gifts from users to system user and social dividend gifts from system user to users

18) Check da texts in rails-i18n

19) allow negative price?
    E.g. if user wish find some thing og get help. Solutions:
    a) negative price - problem with from/to in gifts/index page
    b) radio group or check box in create gift page (giver or receiver)
    c) negative price. set user_id_receiver. Blank user_id_giver
    Implementing b) with an radio group


20) how much information to se about deals between friends and friends friends?
    FB: Shows status from friends on wall - do not show status from friends friends on wall
    Show balance for friends - do not show balance for friends friends
    Show gifts started by friends as giver or receiver with all pictures and comments
    Anonymous gifts started by friends friends as giver or receiver and with friends as receiver or giver
    - display received at and balance.
    - hide picture and name of friends friend
    - hide text and pictures

21) when closing at deal and paying with money.
    select between anonymous money without a linked story or link the money to one or more stores / other gifts
    anonymous money - no links between gifts - no story updates
    linked money - story updates

22) show gift

23) delete gift.
    It should be possible to delete open gifts in gifts/index page
    You should get a confirm dialog if you tries to delete on closed gift

24) balance sorted by received_at in user.recalculate_balance
    gifts sorted by created_at desc in gifts/index
    closed deals should be sorted by received_at descending to display balance in correct order
    open deals should be sorted by newest comment in top
    maybe sort by received_at || created_at <=>  order("ifnull(received_at,created_at)
    sort by received_at not possible. received_at is encrypted text in db
    maybe add field with timestamp for last comment. Newest created / closed / commented deals first
    must be a not encrypted field
    problem. what if different users wishes different sort criteria?  fx a) sort by received_at, b) sort by comment_at, c) etc

4) get timezone from login api. ok. timezone added to user
   Use timezone in views. . not yet any timestamps in views.

25) add date format. see application_helper.format_date

25) add time format. Use timezone in time format in views

26) add a count to a gift. Normally only 1 gift, but can be any number or nil. Eg. nil for a offered service.
    Clone a closed gift, keep the original gift and decrease counter. Close deal when counter reaches zero.
    Maybe link all the stories if accepted by the receiver

27) users/show
    friends - show detailed user information
    non friends - link to FB page - link with friend request

29) api notifications:
    get a app access token.
    send only notifications to api if internal notifications in app is not read.
    Short summary of unread app notifications in api notification
    Only few api notifications and stop sending messages if user do not start app

30) user balance not shown correct
    for example charlie balance in usd and in dkk
    Looks like a sign problem
    List balance in users/show page and debug the problem from here.

34) close account and delete all data in app
    auto cleanup and close of inactive accounts?!
    there is no reason to keep data for users that does not use the app ( other than delete of user and gifts changes other users balance )
    maybe

34b) add more detailed description of what information what i saved in app

35) Problem with partial parameters. Are using instance variables instead of :locals => {} until the problem is solved.
    See render '/shared/user_div' used in many views

39) gifts/index: post on api wall checkbox. Only if user has granted post-on-wall prio.

40) gifts/index: comment with final description before the deal is closed? Or keep original text with comments?

41) implement other logins. Google+ and linkedin login is almost identical wish facebook login

42) connect login user across different login apis. Only one balance even if you uses more than one login api.
    can not show gifts from other login apis, but can include balance from other login apis in user's balance.

43) gets only small picture api url from fb. See gift.get_api_picture_url method
    It should be possible to get url for a larger picture from facebook api

50) wrap fb api into an generic exception handler with dump of request and exception after error

53) Welcome msg. Some welcome xxx if no gifts. Some welcome back if gifts.
    Maybe use some timestamps to check if welcome message should be displayed

54) add accept conditions for new users

55) add disclaimer

56) add cookie policy note

57) problem with client validation of price in firefox. Number without decimal is not accepted
    Price is invalid. Only numbers, max 2 decimals, thousands separator not allowed.

59) check out coffeescript

61) How much sync. of comments in api and comments in app?
    write comment to fb - don't download comments from fb

62) edit gift. Can not edit post on api. Allow to edit post in app?

63) create gift as ajax in gifts/index page?

65) gifts/index
    show only last 4 comments. add url to get more comments if more than 4 comments (ok)
    check user priv. when adding comment

69) mark new comments with color in inbox.

70) only keep last <n> notifications for each user (ok)
    max keep a notification for n days. (not implemented)

71) Offers - I am interested - price + text
    Seeks - I can help - price + text
    Follow/don't follow.
    Default - follow gift you have commented - don't follow other gifts

 73) Model changes - user/user options - Friend - friends.
     Show/hide gifts - default is show - use hide to hide friend gifts
     Show/hide comments - default is show - use hide to hide friend comments

 74) Model changes - user/gift - new model/table - GiftLike (ok)
     like/unlike gift (ok)
     show/hide gift (ok)
     follow/don't follow gift (ok)

 75) Model changes - user/comment - new model/table -
     like/unlike comment

 76) Comment. Add
     bid - nil/Y/N - nil (default) - Y if comment/other user wish to make a deal - N if comment/other user do not wish to make a deal
     price - suggest a (new) price for gift if other user - change price if gift owner

 77) show all gift links in one line
     that is : like, follow, hide and show older comments links
     # old gift layout - 2 different rows with links
     <tr id='gift-230-links'>
       <td colspan="2">
         <a data-method="post" data-remote="true" href="/util/like_gift?gift_id=230" id="gift-230-like-unlike-link" rel="nofollow">Synes om</a>
       - <a data-method="post" data-remote="true" href="/util/follow_gift?gift_id=230" id="gift-230-follow-unfollow-link" rel="nofollow">Følg opslag</a>
       - <a data-confirm="Skjul opslag?" data-method="post" data-remote="true" href="/util/hide_gift?gift_id=230" id="gift-230-hide-link" rel="nofollow">Skjul opslag</a>
       </td>
     </tr>
     <tr id="gift-230-show-older-comments-row-399">
       <td style="vertical-align: top;" colspan="2">
         <a data-remote="true" href="/comments?first_comment_id=399&amp;gift_id=230" id="gift-230-show-older-comments-link-399" onclick="post_ajax_add_older_comments_handler(230,399)">Vis 3 ældre kommentarer</a>
       </td>
     </tr>

     # new gift layout - 1 row - version 1 with show older comments link
     <tr id='gift-230-links'>
       <td colspan="2">
         <a data-method="post" data-remote="true" href="/util/like_gift?gift_id=230" id="gift-230-like-unlike-link" rel="nofollow">Synes om</a>
       - <a data-method="post" data-remote="true" href="/util/follow_gift?gift_id=230" id="gift-230-follow-unfollow-link" rel="nofollow">Følg opslag</a>
       - <a data-confirm="Skjul opslag?" data-method="post" data-remote="true" href="/util/hide_gift?gift_id=230" id="gift-230-hide-link" rel="nofollow">Skjul opslag</a>
       - <a data-remote="true" href="/comments?first_comment_id=399&amp;gift_id=230" id="gift-230-show-older-comments-link-399" onclick="post_ajax_add_older_comments_handler(230,399)">Vis 3 ældre kommentarer</a>
       </td>
     </tr>

     # new gift layout - 1 row - version 2 without show older comments link
     <tr id='gift-230-links'>
       <td colspan="2">
         <a data-method="post" data-remote="true" href="/util/like_gift?gift_id=230" id="gift-230-like-unlike-link" rel="nofollow">Synes om</a>
       - <a data-method="post" data-remote="true" href="/util/follow_gift?gift_id=230" id="gift-230-follow-unfollow-link" rel="nofollow">Følg opslag</a>
       - <a data-confirm="Skjul opslag?" data-method="post" data-remote="true" href="/util/hide_gift?gift_id=230" id="gift-230-hide-link" rel="nofollow">Skjul opslag</a>
       </td>
     </tr>
