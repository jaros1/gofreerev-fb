 1) Maybe allow comments to gifts in Gofreerev => Post af FB comments

 2) few price info on gifts/index page. More information available in titles
    Full price information in user/show page

 3) exchanged social dividend is displayed as gifts/index view, but social dividend = negative_interest / 4 is missing.
    add social dividend (negative_interest / 4) to balance.
    display social dividend in format_user_balance
    done: add key with social dividend to balance hash
    social dividend is splitted in currencies.
    done:  maybe add a negative interest / social dividend hash to user
    maybe add a system user - negative currency could be gifts from users to system user and social dividend gifts from system user to users

 4) allow negative price?
    E.g. if user wish find some thing og get help. Solutions:
    a) negative price - problem with from/to in gifts/index page
    b) radio group or check box in create gift page (giver or receiver)
    c) negative price. set user_id_receiver. Blank user_id_giver
    Implementing b) with an radio group

 5) how much information to se about deals between friends and friends friends?
    FB: Shows status from friends on wall - do not show status from friends friends on wall
    Show balance for friends - do not show balance for friends friends
    Show gifts started by friends as giver or receiver with all pictures and comments
    Anonymous gifts started by friends friends as giver or receiver and with friends as receiver or giver
    - display received at and balance.
    - hide picture and name of friends friend
    - hide text and pictures

 6) when closing at deal and paying with money.
    select between anonymous money without a linked story or link the money to one or more stores / other gifts
    anonymous money - no links between gifts - no story updates
    linked money - story updates

 8) delete gift.
    It should be possible to delete open gifts in gifts/index page
    You should get a confirm dialog if you tries to delete on closed gift

 9) balance sorted by received_at in user.recalculate_balance
    gifts sorted by created_at desc in gifts/index
    closed deals should be sorted by received_at descending to display balance in correct order
    open deals should be sorted by newest comment in top
    maybe sort by received_at || created_at <=>  order("ifnull(received_at,created_at)
    sort by received_at not possible. received_at is encrypted text in db
    maybe add field with timestamp for last comment. Newest created / closed / commented deals first
    must be a not encrypted field
    problem. what if different users wishes different sort criteria?  fx a) sort by received_at, b) sort by comment_at, c) etc

10) get timezone from login api. ok. timezone added to user
    Use timezone in views. . not yet any timestamps in views.

11) add date format. see application_helper.format_date

12) add time format. Use timezone in time format in views

13) add a counter to a gift. Normally 1 gift, but can be any number or nil. Eg. nil for a service.
    Clone a closed gift, keep the original gift and decrease counter. Close deal when counter reaches zero.
    Maybe link all the stories if accepted by the receiver

15) api notifications:
    get a app access token.
    send only notifications to api if internal notifications in app is not read.
    Short summary of unread app notifications in api notification
    Only few api notifications and stop sending messages if user do not start app

17) close account and delete all data in app
    auto cleanup and close of inactive accounts?!
    there is no reason to keep data for users that does not use the app ( other than delete of user and gifts changes other users balance )
    maybe

18) add more detailed description of what user information is saved in app

19) gifts/index: post on api wall checkbox. Only if user has granted post-on-wall prio.

20) gifts/index: comment with final description before the deal is closed? Or keep original text with comments?

21) implement other logins. Google+ and linkedin login is almost identical wish facebook login

22) connect login user across different login apis. Only one balance even if you uses more than one login api.
    can not show gifts from other login apis, but can include balance from other login apis in user's balance.
    check out rails omniauth gem (multi api login)
    allow gofreerev friends across login api.
    how to handle balance across api's?

23) gets only small picture api url from fb. See gift.get_api_picture_url method
    It should http://www.dr.dk/Nyheder/Politik/2013/10/22/083947.htmbe possible to get url for a larger picture from facebook api

24) wrap fb api into an generic exception handler with dump of request and exception after error

25) add accept conditions for new users

26) add disclaimer

27) add cookie policy note

28) check out coffeescript

29) How much sync. of comments in api and comments in app?
    write comment to fb - don't download comments from fb

30) edit gift. Can not edit post on api. Allow to edit post in app?

31) create gift as ajax in gifts/index page?

32) mark new comments with color in inbox.

33) only keep last <n> notifications for each user (ok)
    max keep a notification for n days. (not implemented)

34) Model changes - user/comment - new model/table -
    like/unlike comment

35) Validate comment.price price in JS and on server. Same validation as gift.price.
    JS validation ok. Check server validation.

36) change comment format for agreement proposals.
    after cancel/accept/reject - change format for agreement proposals
    after cancel/accept/reject - change format for agreement proposals in other pages (new messages count)

37) delete gifts

38) ajax hide gift does not work. should hide all rows with id gift-<giftid>- format
                                                 refactoring show-more-rows ajax code (ok for users/show page and users/index pages, missing for gifts/index )
39) new deal / cancel / accept / reject error handling:
    new deal can fail if gift user has accepted an other offer
    cancel can fail if gift user has accepted a deal or has rejected new deal from user
    accept can fail if other user has cancelled the offer
    reject can fail if other user has cancelled the offer
    write short error msg in gift-xxx-comment-yyy-status div after errors
    after accept - add sender/receiver and remove links

40) new messages count - ajax replace gift
    could be used after accept new deal to change gift in other sessions
    change new_comments_div to include comments with changed "status"

41) new messages count - ajax delete gift

42) new messages count - ajax replace comment
    could be used after cancel or reject to change comment in other sessions
    change new_gifts_div to inlcude gifts with changed "status"

43) new messages count - ajax delete comment

44) add a last status  7) show giftupdate timestamp to gift/comment (ok)
    last status update timestamp is inserted in web page and send to new messages count (ok)
    new gifts, new comments and changes gifts and comments are returned in new messages count (todo)

45) comments: timestamps for cancel, reject and accept deal?

46) use identical encryption keys on development and test (easy generation of fixtures)
    use different encryption keys in production environment

47) make script to compare language files (en, da etc). Find missing keys

48) allow new proposal for giver/receiver so that giver/receiver can change price?

49) add missing_api_picture_urls check to gifts/show page
    Maybe also to user/show page
    get_missing_api_picture_urls (ruby) / report_missing_api_picture_urls (javascript) could be added to other pages

50) maybe move /util/missing_api_picture_urls requests to a batch process
    problem is that access_token is stored in encrypted cookie and only available in requests/controller
    could store api access token in db, but that could be a security problem
    as it will give api access if the server / database in compromised

14) users/show
    non friends - link to FB page - link with friend request (ok)
    friends - show detailed user information (ok)
    friend information - detailed balance information
    filter: open deals, close deals, open and close deals (todo)
    filter: giver, receiver, giver or receiver (todo)

51) add category to gift?
    could make it easier to find relevant gifts
    But more information to fill when posting gifts

52) filter links - users/index and users/show
    mark currency filter - bold and inactive

54) ajax not working for gifts/index page (all gifts)

55) add number of friends to user_div mouseover text?

56) add number of mutual friends to user_div mouseover text?

57) refactor users/_user. Should be one table with 4 columns (picture, prompt, colon and value)