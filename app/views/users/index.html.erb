<script>
    <%=
      # recheck invalid picture urls with owner permissions
      @missing_api_picture_urls
    %>
</script>

<%# my_t '.page_header_text_html' %>

<br />
<table>
  <tr>
    <td><%= my_t '.friends_filter_prompt', :appname => APP_NAME %></td>
    <td><%= link_to my_t('.app_friends_link_text'), users_path(:friends => true) %></td>
    <td><%= link_to my_t('.not_app_friends_link_text'), users_path(:friends => false) %></td>
    <td><%= link_to my_t('.all_app_users_link_text'), users_path %></td>
    <td>&nbsp;&nbsp;|&nbsp;&nbsp;</td>
    <td><%= my_t '.invite_api_friends_link_prompt2', :apiname => @user.api_name_without_brackets %></td>
    <td title="<%= my_t '.invite_api_friends_link_title2', :appname => APP_NAME, :apiname => @user.api_name_without_brackets %>">
      <%= link_to my_t('.invite_api_friends_link_text2', :apiname => @user.api_name_without_brackets), invite_friends_url %>
    </td>
  </tr>
</table>
<br />

<% if @users.size == 0 -%>
    <p>
      <%= my_t '.no_users_was_found_html', :appname => APP_NAME, :apiname => @user.api_name_without_brackets %>
    </p>
    <%= my_t 'shared.invite_friends.invite_api_friends_link_prompt1', :apiname => @user.api_name_without_brackets %> <%= invite_friends_link1 %>
    <br />
<% else -%>
    <table id="users">
    <% for user in @users do -%>
        <%= render :partial => 'user', :locals => { :user => user } %>
    <% end -%>
    </table>
<% end -%>

<br />
<%= link_to "show-more-lines", "/users?last_row_id=#{@last_row_id}", :remote => true, :id => "show-more-rows-link", :style => "display: none" %>
<%= render :partial => 'shared/show_more_rows', :show_more_rows => 'users' %>

<script>
    // no client side checks before changing currency in this page
    pre_update_currency = default_pre_update_currency ;
</script>